<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!--                                                                        -->
<!--  JBoss, the OpenSource J2EE webOS                                      -->
<!--                                                                        -->
<!--  Distributable under LGPL license.                                     -->
<!--  See terms of license at http://www.gnu.org.                           -->
<!--                                                                        -->
<!-- ====================================================================== -->

<!-- $Id$ -->

<project>

	<macrodef name="macro-deploy-spi">
		<attribute name="spilibs"/>
		<attribute name="spiscripts"/>
		<attribute name="thirdpartylibs"/>
		<attribute name="jbosshome"/>
		<sequential>
			<copy todir="@{jbosshome}/client">
				<fileset dir="@{spilibs}">
					<include name="jbossws-spi.jar"/>
				</fileset>
			</copy>
			<copy todir="@{jbosshome}/server/${jboss.server.instance}/lib">
				<fileset dir="@{spilibs}">
					<include name="jbossws-spi.jar"/>
				</fileset>
			</copy>
			<copy todir="@{jbosshome}/bin" overwrite="true">
				<fileset dir="@{spiscripts}">
					<include name="wsconsume.bat"/>
					<include name="wsconsume.sh"/>
					<include name="wsprovide.bat"/>
					<include name="wsprovide.sh"/>
				</fileset>
			</copy>
			<chmod dir="@{jbosshome}/bin" perm="+x" includes="*.sh"/>
		</sequential>
	</macrodef>

	<macrodef name="macro-undeploy-spi">
		<attribute name="jbosshome"/>
		<sequential>
			<delete>
				<fileset dir="@{jbosshome}/client">
					<include name="jbossws-spi.jar"/>
				</fileset>
				<fileset dir="@{jbosshome}/server/${jboss.server.instance}/lib">
					<include name="jbossws-spi.jar"/>
				</fileset>
				<fileset dir="@{jbosshome}/bin">
					<include name="wsconsume.bat"/>
					<include name="wsconsume.sh"/>
					<include name="wsprovide.bat"/>
					<include name="wsprovide.sh"/>
				</fileset>
			</delete>
		</sequential>
	</macrodef>

</project>