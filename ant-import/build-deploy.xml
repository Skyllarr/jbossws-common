<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!--                                                                        -->
<!--  JBoss, the OpenSource J2EE webOS                                      -->
<!--                                                                        -->
<!--  Distributable under LGPL license.                                     -->
<!--  See terms of license at http://www.gnu.org.                           -->
<!--                                                                        -->
<!-- ====================================================================== -->

<!-- $Id$ -->

<project>

   <!-- ================================================================== -->
   <!-- Deployment  JBoss50                                                -->
   <!-- ================================================================== -->

   <target name="_deploy-common">
		<copy todir="${jboss50.home}/client">
			<fileset dir="${spi.dir}/output/lib/">
          <include name="jbossws-spi.jar"/>
        </fileset>
		</copy>
		<copy todir="${jboss50.home}/server/${jboss.server.instance}/lib">
			<fileset dir="${spi.dir}/output/lib/">
          <include name="jbossws-spi.jar"/>
        </fileset>
		</copy>
		<copy todir="${jboss50.home}/bin" overwrite="true">
         <fileset dir="${spi.dir}/etc">
            <include name="wsconsume.bat"/>
            <include name="wsconsume.sh"/>
				<include name="wsprovide.bat"/>
				<include name="wsprovide.sh"/>
			</fileset>
      </copy>

		<chmod dir="${jboss50.home}/bin" perm="+x" includes="**/*.sh"/>
	</target>

   <target name="_undeploy-common">
      <delete>

        	<fileset dir="${jboss50.home}/client">
				<include name="jbossws-spi.jar"/>
			 </fileset>

			<fileset dir="${jboss50.home}/server/${jboss.server.instance}/lib">
				<include name="jbossws-spi.jar"/>
			</fileset>

			<!--include name="jbossws-spi.jar"/-->
			<fileset dir="${jboss50.home}/bin">
            <include name="ws*.sh"/>
            <include name="ws*.bat"/>
         </fileset>
      </delete>
   </target>

   <!-- Deploy jbossws to jboss50 -->
   <target name="deploy-jboss50" description="Deploy jbossws to jboss50">
      <antcall target="_deploy-common"/>
   </target>

   <!-- Remove jbossws from jboss50 -->
   <target name="undeploy-jboss50" depends="prepare" description="Remove jbossws from jboss50">
      <antcall target="_undeploy-common"/>
   </target>

   <!-- Deploy jbossws to jboss42 -->
   <target name="deploy-jboss42" description="Deploy jbossws to jboss42">
      <antcall target="_deploy-common"/>
   </target>

   <!-- Remove jbossws from jboss42 -->
   <target name="undeploy-jboss42" depends="prepare" description="Remove jbossws from jboss42">
      <antcall target="_undeploy-common"/>
   </target>
   
</project>
